{"version":3,"sources":["@traceur/generated/TemplateParser/5","src/core/compiler/pipeline/directive_parser.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/11","src/core/compiler/pipeline/@traceur/generated/TemplateParser/24","src/core/compiler/pipeline/@traceur/generated/TemplateParser/37"],"names":[],"mappings":"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","file":"src/core/compiler/pipeline/directive_parser.js","sourceRoot":"/Users/deast/Angular/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","import {isPresent, isBlank, BaseException, assertionsEnabled, RegExpWrapper} from 'angular2/src/facade/lang';\nimport {List, MapWrapper} from 'angular2/src/facade/collection';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {SelectorMatcher} from '../selector';\nimport {CssSelector} from '../selector';\n\nimport {DirectiveMetadata} from '../directive_metadata';\nimport {DynamicComponent, Component, Viewport} from '../../annotations/annotations';\nimport {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\n\nvar PROPERTY_BINDING_REGEXP = RegExpWrapper.create('^ *([^\\\\s\\\\|]+)');\n\n/**\n * Parses the directives on a single element. Assumes ViewSplitter has already created\n * <template> elements for template directives.\n *\n * Fills:\n * - CompileElement#decoratorDirectives\n * - CompileElement#templateDirecitve\n * - CompileElement#componentDirective.\n *\n * Reads:\n * - CompileElement#propertyBindings (to find directives contained\n *   in the property bindings)\n * - CompileElement#variableBindings (to find directives contained\n *   in the variable bindings)\n */\nexport class DirectiveParser extends CompileStep {\n  _selectorMatcher:SelectorMatcher;\n  constructor(directives:List<DirectiveMetadata>) {\n    super();\n    var selector;\n\n    this._selectorMatcher = new SelectorMatcher();\n    for (var i=0; i<directives.length; i++) {\n      var directiveMetadata = directives[i];\n      selector = CssSelector.parse(directiveMetadata.annotation.selector);\n      this._selectorMatcher.addSelectables(selector, directiveMetadata);\n    }\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var attrs = current.attrs();\n    var classList = current.classList();\n\n    var cssSelector = new CssSelector();\n    var nodeName = DOM.nodeName(current.element);\n    cssSelector.setElement(nodeName);\n    for (var i=0; i < classList.length; i++) {\n      cssSelector.addClassName(classList[i]);\n    }\n\n    MapWrapper.forEach(attrs, (attrValue, attrName) => {\n      cssSelector.addAttribute(attrName, attrValue);\n    });\n\n    // Note: We assume that the ViewSplitter already did its work, i.e. template directive should\n    // only be present on <template> elements!\n    var isTemplateElement = DOM.isTemplateElement(current.element);\n\n    this._selectorMatcher.match(cssSelector, (selector, directive) => {\n      current.addDirective(checkDirectiveValidity(directive, current, isTemplateElement));\n    });\n  }\n}\n\n// check if the directive is compatible with the current element\nfunction checkDirectiveValidity(directive, current, isTemplateElement) {\n  var isComponent = directive.annotation instanceof Component || directive.annotation instanceof DynamicComponent;\n  var alreadyHasComponent = isPresent(current.componentDirective);\n\n  if (directive.annotation instanceof Viewport) {\n    if (!isTemplateElement) {\n      throw new BaseException(`Viewport directives need to be placed on <template> elements or elements ` +\n         `with template attribute - check ${current.elementDescription}`);\n    } else if (isPresent(current.viewportDirective)) {\n      throw new BaseException(`Only one viewport directive can be used per element - check ${current.elementDescription}`);\n    }\n  } else if (isTemplateElement) {\n    throw new BaseException(`Only template directives are allowed on template elements - check ${current.elementDescription}`);\n\n  } else if (isComponent && alreadyHasComponent) {\n    throw new BaseException(`Multiple component directives not allowed on the same element - check ${current.elementDescription}`);\n  }\n\n  return directive;\n}\n","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.genericType($__placeholder__0)"]}